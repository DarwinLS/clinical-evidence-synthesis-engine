# Clinical Evidence Aggregator (MVP)

A structured, evidence-based research platform that aggregates clinical studies on supplements and wellness. This system generates transparent, demographic-specific summaries using verified data.

> **Core Philosophy:** An AI-powered, continuously updating evidence hubâ€”not a generic chatbot.

---

## ðŸŽ¯ Project Vision

### Long-Term Goal
To build a research analysis engine combining automated study retrieval, metadata/statistical aggregation, and LLM-based narrative summaries. The result is a structured, personalized evidence profile for any supplement or fitness intervention.

### MVP Goal
To implement the first end-to-end pipeline for a single supplement (e.g., Creatine). The system fetches studies, extracts age-specific metadata, filters for quality, and generates an evidence report using strict, citation-based prompting.

---

## âš¡ Key Differentiators

Unlike generic LLMs (ChatGPT, Claude) which prioritize linguistic flow over factual attribution, this project focuses on:

* **âœ… Verified Research Dataset:** Uses only real PubMed/Semantic Scholar studies. No hallucinated citations.
* **ðŸ›¡ï¸ Context Reset:** Every query starts fresh. The LLM is barred from using pre-training memory, ensuring results come *only* from the retrieved papers.
* **ðŸ§¬ Demographic Filtering:** Studies are weighted by their relevance to the user's specific age (and eventually sex/training level).
* **ðŸ§± Structured Output:** Standardized JSON outputs ensure consistent sections (Effects, Safety, Dosage) rather than freeform rambling.
* **ðŸ“Š Cross-Study Statistics:** The backend calculates study counts and sample sizes; the LLM only provides the narrative.

---

## ðŸ—ï¸ System Architecture & Pipeline

The application follows a strict 6-step pipeline to ensure data integrity.

### 1. User Input
* **Primary Query:** Supplement Name (e.g., "Creatine Monohydrate").
* **Demographic Filters:** Age (e.g., "22").
* **Optional:** Sex, Goal (Hypertrophy vs. Cognition).

### 2. Data Collection (The "Fetcher")
* **Source:** PubMed API / Semantic Scholar API.
* **Strategy:** Fetches a broad batch (Top 30â€“50) to ensure sufficient raw material.
* **Constraints:** `"{Supplement}" AND ("systematic review" OR "randomized controlled trial")`. Filters strictly for **Human** studies.

### 3. The "Extractor" Layer (The Parser)
* **Mechanism:** Uses a "Worker LLM" (Fast/Cheap model) to parse abstracts individually. **No Regex.**
* **Task:** Converts unstructured text into structured JSON for filtering.
* **Extraction Target:** Study Design, Mean Age, Age Range, Sample Size ($n$), Sex, Outcome.

### 4. Filtering & Ranking (The Logic Engine)
* **Relevance Scoring:**
    1.  **Age Match:** Does the study overlap with the User Age? (Highest Weight)
    2.  **Study Design:** Meta-Analysis > RCT > Observational.
    3.  **Sample Size:** Higher $n$ prioritized.
    4.  **Recency:** Tie-breaker.
* **Output:** Selects top 5â€“7 studies for the summary.

### 5. LLM Synthesis (The "Writer")
* **Input:** User Age + Selected Abstracts + IDs.
* **Constraints:**
    * **Null Output:** If data is missing, output `null`. Do not guess.
    * **Citation Enforcement:** Every claim must be followed by `[ID]`.
* **Output:** Strict JSON schema.

### 6. Frontend Rendering
* **Visualization:** Parses JSON to display "Sandwiched" explanations (Text â†’ Citation â†’ Data).
* **Interaction:** Hovering over citation `[1]` reveals the specific metadata (e.g., "RCT, n=45, 2023").

---

## ðŸ’¾ Data Structures

The system relies on two core JSON schemas to maintain structure between the Worker LLM and the Writer LLM.

### Intermediate Extraction JSON (Step 3)
*Generated by the Worker LLM for the Logic Engine.*

```json
{
  "pmid": "123456",
  "study_type": "RCT",
  "mean_age": 24,
  "age_range_min": 18,
  "age_range_max": 35,
  "participant_count": 40,
  "relevant_outcome": "Increased muscle mass",
  "is_human": true
}
```

### Final Synthesis JSON (Step 5)
*Generated by the Writer LLM for the Frontend.*

```json
{
  "supplement": "Creatine Monohydrate",
  "target_demographic": "Age 18-35",
  "data_quality_score": "High (Based on 4 RCTs)",
  "summary_sections": [
    {
      "topic": "Physical Performance",
      "finding": "Consistently improves power output in resistance training [67890].",
      "strength_of_evidence": "High",
      "relevant_studies": ["67890"]
    }
  ],
  "safety_profile": {
    "side_effects": "Minor gastrointestinal distress [67890].",
    "contraindications": null
  },
  "citations": {
    "67890": { "title": "Power output in...", "year": 2021, "n": 120 }
  }
}
```

## ðŸ”® Future Roadmap (Post-MVP)

While the MVP focuses on single-query verification, the long-term platform will introduce:

* **ðŸ‘¤ User Profiles & Biometrics:** Save your Age, Sex, Weight, and Training Experience once. The system will then auto-weight every future search against your specific biological profile.
* **ðŸ”” Active Monitoring:** "Watch" a supplement. When a new clinical trial matching your demographic is published, you get a notification.
* **ðŸ§ª The "N=1" Tracker:** Optional features for users to log their own response to supplements, comparing their personal results against the aggregated clinical data.
